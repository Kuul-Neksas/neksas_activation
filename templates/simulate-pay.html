<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Simula Pagamento</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#f4f7fa; color:#222; }
    .card { max-width:600px; margin:0 auto; background:white; padding:20px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.08); }
    h1 { color:#0077cc; }
    label { display:block; margin-top:12px; font-weight:bold; }
    input { width:100%; padding:8px; margin-top:6px; border:1px solid #ccc; border-radius:6px; }
    button { margin-top:16px; padding:10px 14px; background:#0077cc; color:white; border:none; border-radius:6px; cursor:pointer; }
    button:hover { background:#005fa3; }
    .success { background:#e9f7ef; color:#1b7a3a; padding:12px; border-radius:6px; margin-top:20px; }
    .error { background:#fdecea; color:#9b2222; padding:12px; border-radius:6px; margin-top:20px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Simula Pagamento {{ psp }}</h1>
    <p><strong>Importo:</strong> {{ amount }} €</p>
    <p><strong>Descrizione:</strong> {{ desc or "-" }}</p>
    <p><strong>Azienda:</strong> {{ business or "-" }}</p>

    {% if success %}
      <div class="success">
        ✅ Pagamento simulato registrato con successo.<br>
        ID transazione: <strong>{{ tx_id }}</strong>
      </div>
    {% elif error %}
      <div class="error">
        ❌ Errore durante la simulazione del pagamento:<br>
        {{ error }}
      </div>
    {% else %}
      <form method="post">
        <input type="hidden" name="user_id" value="{{ user_id }}">
        <input type="hidden" name="psp_name" value="{{ psp }}">
        <input type="hidden" name="amount" value="{{ amount }}">
        <input type="hidden" name="desc" value="{{ desc }}">
        <input type="hidden" name="business" value="{{ business }}">

        <label for="card">Numero carta (simulato)</label>
        <input id="card" name="card" type="text" required placeholder="Inserisci numero carta simulata">

        <button type="submit">Conferma Pagamento</button>
      </form>
    {% endif %}
  </div>
</body>
</html>
